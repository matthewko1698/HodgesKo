<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <script type="text/javascript" src='d3.js'>

    </script>
  </head>
  <body>
    <svg>
    </svg>
    <p class="day">0</p>
    <button type="button" name="p" class='p'>Prev</button>
    <button type="button" name="n" class ='n'>Next</button>
  </body>
  <script type="text/javascript">

    var data = d3.json('gradeDataTime.json').then(function(data){
        initialize(data);
        d3.select('.p').on('click',function(data){
            updatep(data);
        })
        // d3.select('.n').on('click',function(d,i){
        //     update(d,i);
        // })
    })

    var initialize = function(data){

      var svgwidth = 700;
      var svgheight = 500;

      var svg = d3.select('svg').attr('width',svgwidth).attr('height',svgheight);
      var margins =
      {
        top:20,
        bottom:50,
        left:50,
        right:100
      }

      var width = svgwidth -margins.left - margins.right;
      var height = svgheight -margins.top - margins.bottom;

      var barWidth= width/5;

      var colors = d3.scaleOrdinal(d3.schemeSet1);

      var plot = svg.append('g').classed('plot',true)
              .attr('transform','translate('+margins.left+","+margins.top+")");

      var rect = plot.selectAll('rect')
                     .data( data[0].grades)
                     .enter()
                     .append('rect')
                     .classed('rect',true)
                     .attr('x', function(d,i){

                       return i*(width/4)+margins.left;
                     })
                     .attr('y',height/2)
                     .attr('width',barWidth)
                     .attr('height',height/2)
                     .attr('fill',function(d){
                       return colors(d.name)
                     });

      var names = plot.selectAll('text').data(data[0].grades)
                      .enter()
                      .append('text')
                      .attr('x',function(d,i){
                        return i*(width/4)+margins.left+barWidth/3;
                      })
                      .attr('y',height+margins.bottom/3)
                      .text(function(d){
                        return d.name;
                      })
    }

    var updatep = function(d){

        var day = d3.select('.day').innerHtml;
        var daynum = Number(day);
        console.log(day);

    }

  </script>
</html>
